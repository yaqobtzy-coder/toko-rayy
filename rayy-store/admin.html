<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Toko Rayy</title>
    <script src="config.js"></script>
    <style>
        body { background-color: #0b1120; color: white; font-family: sans-serif; padding: 20px; }
        .card { background: #1e293b; border-radius: 15px; padding: 20px; margin-bottom: 15px; border-left: 4px solid #f59e0b; position: relative; }
        .btn-green { background: #22c55e; color: white; width: 100%; padding: 12px; border: none; border-radius: 8px; font-weight: bold; margin-top: 10px; cursor: pointer; }
        .status-tag { position: absolute; top: 20px; right: 20px; font-size: 0.8rem; }
    </style>
</head>
<body>

<div id="loginPage">
    <h2>Login Admin</h2>
    <input type="text" id="u" placeholder="User" style="width:100%; padding:10px; margin-bottom:10px;">
    <input type="password" id="p" placeholder="Pass" style="width:100%; padding:10px; margin-bottom:10px;">
    <button onclick="login()" style="width:100%; padding:10px;">MASUK</button>
</div>

<div id="historyPage" style="display:none;">
    <h2 id="tokoTitle"></h2>
    <div id="trans2" class="card">
        <span class="status-tag" id="tag2">⌛ Pending</span>
        <b>RAYY1766275313193</b><br>Rp 5.000
        <div id="btn2"><button class="btn-green" onclick="konfirmasi('2')">KONFIRMASI PEMBAYARAN</button></div>
    </div>
</div>

<script>
    let salah = 0;
    function login() {
        const user = document.getElementById('u').value;
        const pass = document.getElementById('p').value;
        let banned = JSON.parse(localStorage.getItem('bannedUsers')) || [];

        if(banned.includes(user)) { alert("AKUN DIBLOKIR!"); return; }

        if(user === CONFIG.ownerUsername && pass === CONFIG.ownerPassword) {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('historyPage').style.display = 'block';
            document.getElementById('tokoTitle').innerText = CONFIG.namaToko;
        } else {
            salah++;
            if(salah >= 3) {
                banned.push(user);
                localStorage.setItem('bannedUsers', JSON.stringify(banned));
                alert("Salah 3x! Akun diblokir.");
            } else { alert("Salah! Sisa: " + (3-salah)); }
        }
    }

    function konfirmasi(id) {
        new Audio('https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3').play();
        document.getElementById('trans'+id).style.borderLeft = "4px solid #22c55e";
        document.getElementById('tag'+id).innerText = "✅ Sukses";
        document.getElementById('btn'+id).innerHTML = "";
        alert("Sukses!");
    }
</script>
</body>
</html>
